# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram-–±–æ—Ç–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Raspberry Pi

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram** –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É** `/newbot`
3. **–í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Raspberry Pi Monitor")
4. **–í–≤–µ–¥–∏—Ç–µ username** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "my_pi_monitor_bot") - –¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ "bot"
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω** - –æ–Ω –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
sudo apt-get update

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python –∏ pip (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
sudo apt-get install python3 python3-pip

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è Telegram
pip3 install python-telegram-bot

# –ò–ª–∏ —á–µ—Ä–µ–∑ apt (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±)
sudo apt-get install python3-telegram-bot
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª** `telegram_monitor_bot.py`
2. **–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É** `TELEGRAM_TOKEN = "YOUR_BOT_TOKEN_HERE"` –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω:
   ```python
   TELEGRAM_TOKEN = "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
   ```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:

1. **–ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à ID** –≤ Telegram:
   - –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É @userinfobot
   - –û–Ω –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, 123456789)

2. **–î–æ–±–∞–≤—å—Ç–µ ID –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö**:
   ```python
   ALLOWED_USERS = [123456789]  # –í–∞—à ID
   ```

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
python3 telegram_monitor_bot.py

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
nohup python3 telegram_monitor_bot.py > bot.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
tail -f bot.log
```

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞** –≤ Telegram –ø–æ username
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É** `/start`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—É** `/status`

## üîß –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –ø–æ–∫–∞–∑ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
- `/status` - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫)
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç /status

- **üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ CPU** - —Ç–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å –æ—Ü–µ–Ω–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **‚ö° –ó–∞–≥—Ä—É–∑–∫–∞ CPU** - —Å—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∑–∞ 1, 5 –∏ 15 –º–∏–Ω—É—Ç
- **üß† –ü–∞–º—è—Ç—å** - –æ–±—â–∞—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –∏ –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å
- **üíæ –î–∏—Å–∫** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- **‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã** - —Å–∫–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

## üö® –°—Ç–∞—Ç—É—Å—ã —Å–∏—Å—Ç–µ–º—ã

- **‚úÖ** - –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **‚ö†** - –ü–æ–≤—ã—à–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–≤–Ω–∏–º–∞–Ω–∏–µ)
- **‚ùå** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π)

## üîÑ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### –°–ø–æ—Å–æ–± 1: systemd —Å–µ—Ä–≤–∏—Å

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞**:
```bash
sudo nano /etc/systemd/system/pi-monitor-bot.service
```

2. **–î–æ–±–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ**:
```ini
[Unit]
Description=Raspberry Pi Monitor Telegram Bot
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/raspberry_scripts
ExecStart=/usr/bin/python3 /home/pi/raspberry_scripts/telegram_monitor_bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

3. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å**:
```bash
sudo systemctl daemon-reload
sudo systemctl enable pi-monitor-bot
sudo systemctl start pi-monitor-bot
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**:
```bash
sudo systemctl status pi-monitor-bot
```

### –°–ø–æ—Å–æ–± 2: crontab

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
@reboot cd /home/pi/raspberry_scripts && python3 telegram_monitor_bot.py > bot.log 2>&1 &
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "ModuleNotFoundError: No module named 'telegram'"
```bash
pip3 install python-telegram-bot --upgrade
```

### –û—à–∏–±–∫–∞ "Permission denied"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª
chmod +x telegram_monitor_bot.py

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å sudo (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
sudo python3 telegram_monitor_bot.py
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f bot.log`

### –û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
```bash
export LANG=en_US.UTF-8
python3 telegram_monitor_bot.py
```

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–º–µ—Ä–æ–π**:
```bash
sudo apt-get install python3-picamera
pip3 install opencv-python
```

2. **–î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤ –±–æ—Ç–∞**:
```python
async def photo(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã"""
    try:
        # –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ç–æ
        camera = cv2.VideoCapture(0)
        ret, frame = camera.read()
        if ret:
            cv2.imwrite('temp_photo.jpg', frame)
            camera.release()
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ
            with open('temp_photo.jpg', 'rb') as photo:
                await update.message.reply_photo(photo)
            
            # –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
            os.remove('temp_photo.jpg')
        else:
            await update.message.reply_text("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ —Å –∫–∞–º–µ—Ä—ã")
    except Exception as e:
        await update.message.reply_text(f"‚ùå –û—à–∏–±–∫–∞: {e}")
```

3. **–î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**:
```python
application.add_handler(CommandHandler("photo", photo))
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω** –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f bot.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `sudo systemctl restart pi-monitor-bot` 